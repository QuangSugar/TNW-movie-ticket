{"version":3,"sources":["pages/Register/index.js"],"names":["Register","useSelector","state","authReducer","responseRegister","loadingRegister","errorRegister","location","useLocation","history","useHistory","dispatch","useDispatch","useEffect","Swal","fire","position","icon","title","showConfirmButton","timer","push","resetErrorLoginRegister","signupUserSchema","yup","shape","taiKhoan","required","matKhau","email","soDt","matches","hoTen","className","style","padding","src","logoTix","alt","width","marginBottom","cursor","display","marginLeft","marginRight","textAlign","initialValues","maNhom","maLoaiNguoiDung","validationSchema","onSubmit","user","console","log","register","formikProps","name","render","msg","type","disable","toString"],"mappings":"uGAAA,sIAWe,SAASA,IAAY,IAAD,EAC4BC,aAC3D,SAACC,GAAD,OAAWA,EAAMC,eADXC,EADyB,EACzBA,iBAAkBC,EADO,EACPA,gBAAiBC,EADV,EACUA,cAGvCC,EAAWC,cACTC,EAAUC,cACVC,EAAWC,cAEjBC,qBAAU,WACJT,IAEFU,IAAKC,KAAK,CACRC,SAAU,SACVC,KAAM,UACNC,MAAO,4DACPC,mBAAmB,EACnBC,MAAO,MAETX,EAAQY,KAAK,YAAad,EAASL,UAEpC,CAACE,IACJS,qBAAU,WACR,OAAO,WACLF,EAASW,kBAEV,IAEH,IAEMC,EAAmBC,MAAaC,MAAM,CAC1CC,SAAUF,MAAaG,SAAS,wEAChCC,QAASJ,MAAaG,SAAS,yEAC/BE,MAAOL,MAEJG,SAAS,4DACTE,MAAM,sCACTC,KAAMN,MAEHG,SAAS,wFACTI,QAXH,0GAWwB,gEACxBC,MAAOR,MAAaG,SAAS,+DAW/B,OACE,sBAAKM,UAAU,aAAaC,MAAO,CAAEC,QAAS,kBAA9C,UACE,sBAAKF,UAAU,YAAf,UACE,qBACEG,IAAKC,IACLC,IAAI,UACJJ,MAAO,CACLK,MAAO,QACPC,aAAc,OACdC,OAAQ,UACRC,QAAS,QACTC,WAAY,OACZC,YAAa,UAGjB,mBAAGV,MAAO,CAAEW,UAAW,SAAUL,aAAc,QAA/C,sJAIF,cAAC,IAAD,CACEM,cAAe,CACbpB,SAAU,GACVE,QAAS,GACTC,MAAO,GACPC,KAAM,GACNiB,OAAQ,OACRC,gBAAiB,YACjBhB,MAAO,IAETiB,iBAAkB1B,EAClB2B,SAtCe,SAACC,GAEpBC,QAAQC,IAAR,OAAoBF,GACf9C,GAAoBD,GACvBO,EAAS2C,YAASH,KAuBlB,SAaG,SAACI,GAAD,OACC,eAAC,IAAD,CAAMtB,UAAU,YAAhB,UACE,sBAAKA,UAAU,aAAf,UACE,0DACA,cAAC,IAAD,CACEuB,KAAK,WACLC,OAAQ,SAACC,GAAD,OAAS,sBAAMzB,UAAU,cAAhB,SAA+ByB,OAElD,cAAC,IAAD,CAAOF,KAAK,WAAWG,KAAK,OAAO1B,UAAU,oBAE/C,sBAAKA,UAAU,aAAf,UACE,2DACA,cAAC,IAAD,CACEuB,KAAK,UACLC,OAAQ,SAACC,GAAD,OAAS,sBAAMzB,UAAU,cAAhB,SAA+ByB,OAElD,cAAC,IAAD,CAAOF,KAAK,UAAUG,KAAK,WAAW1B,UAAU,oBAElD,sBAAKA,UAAU,aAAf,UACE,6DACA,cAAC,IAAD,CACEuB,KAAK,QACLC,OAAQ,SAACC,GAAD,OAAS,sBAAMzB,UAAU,cAAhB,SAA+ByB,OAElD,cAAC,IAAD,CAAOF,KAAK,QAAQG,KAAK,OAAO1B,UAAU,oBAG5C,sBAAKA,UAAU,aAAf,UACE,8CACA,cAAC,IAAD,CACEuB,KAAK,QACLC,OAAQ,SAACC,GAAD,OAAS,sBAAMzB,UAAU,cAAhB,SAA+ByB,OAElD,cAAC,IAAD,CAAOF,KAAK,QAAQG,KAAK,QAAQ1B,UAAU,oBAE7C,sBAAKA,UAAU,aAAf,UACE,0EACA,cAAC,IAAD,CACEuB,KAAK,OACLC,OAAQ,SAACC,GAAD,OAAS,sBAAMzB,UAAU,cAAhB,SAA+ByB,OAElD,cAAC,IAAD,CAAOF,KAAK,OAAOG,KAAK,OAAO1B,UAAU,oBAe3C,sBAAKA,UAAU,kBAAf,UACE,wBACE0B,KAAK,SACL1B,UAAU,kBACV2B,QAASvD,EAAgBwD,WAH3B,kCAQCvD,GACC,qBAAK2B,UAAU,qBAAf,SACE,+BAAO3B","file":"static/js/29.0c516601.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\n\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport * as yup from \"yup\";\nimport { ErrorMessage, Field, Form, Formik } from \"formik\";\nimport Swal from \"sweetalert2\";\n\nimport { register, resetErrorLoginRegister } from \"../../reducers/actions/Auth\";\nimport logoTix from \"./logo/logoTix.png\";\n\nexport default function Register() {\n  const { responseRegister, loadingRegister, errorRegister } = useSelector(\n    (state) => state.authReducer\n  );\n  let location = useLocation();\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (responseRegister) {\n      // đăng ký thành công thì đăng nhập, responseRegister để bỏ qua componentditmount\n      Swal.fire({\n        position: \"center\",\n        icon: \"success\",\n        title: \"Bạn đã đăng ký thành công\",\n        showConfirmButton: false,\n        timer: 2000,\n      });\n      history.push(\"/dangnhap\", location.state);\n    }\n  }, [responseRegister]);\n  useEffect(() => {\n    return () => {\n      dispatch(resetErrorLoginRegister());\n    };\n  }, []);\n\n  const phoneRegExp =\n    /^((\\\\+[1-9]{1,4}[ \\\\-]*)|(\\\\([0-9]{2,3}\\\\)[ \\\\-]*)|([0-9]{2,4})[ \\\\-]*)*?[0-9]{3,4}?[ \\\\-]*[0-9]{3,4}?$/;\n  const signupUserSchema = yup.object().shape({\n    taiKhoan: yup.string().required(\"*Tài khoản không được bỏ trống !\"),\n    matKhau: yup.string().required(\"*Mật khẩu không được bỏ trống !\"),\n    email: yup\n      .string()\n      .required(\"*Email không được bỏ trống !\")\n      .email(\"* Email không hợp lệ \"),\n    soDt: yup\n      .string()\n      .required(\"*Số điện thoại không được bỏ trống !\")\n      .matches(phoneRegExp, \"Số điện thoại không hợp lệ!\"),\n    hoTen: yup.string().required(\"*Tên không được bỏ trống !\"),\n  });\n\n  const handleSubmit = (user) => {\n    // trường hợp nào thì cho đăng ký(return true): loadingRegister=false và responseRegister=null\n    console.log(`user`, user);\n    if (!loadingRegister && !responseRegister) {\n      dispatch(register(user));\n    }\n  };\n\n  return (\n    <div className=\"text-light\" style={{ padding: \"20px 32px 30px\" }}>\n      <div className=\"container\">\n        <img\n          src={logoTix}\n          alt=\"logoTix\"\n          style={{\n            width: \"200px\",\n            marginBottom: \"10px\",\n            cursor: \"pointer\",\n            display: \"block\",\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n          }}\n        />\n        <p style={{ textAlign: \"center\", marginBottom: \"10px\" }}>\n          Đăng Ký để được nhiều ưu đãi, mua vé và bảo mật thông tin!\n        </p>\n      </div>\n      <Formik\n        initialValues={{\n          taiKhoan: \"\",\n          matKhau: \"\",\n          email: \"\",\n          soDt: \"\",\n          maNhom: \"GP09\",\n          maLoaiNguoiDung: \"KhachHang\", // điền QuanTri backend cũng áp dụng KhachHang\n          hoTen: \"\",\n        }}\n        validationSchema={signupUserSchema} // validationSchdema:  thu vien yup nhập sai ko submit được\n        onSubmit={handleSubmit}\n      >\n        {(formikProps) => (\n          <Form className=\"col-sm-12\">\n            <div className=\"form-group\">\n              <label>Tài khoản&nbsp;</label>\n              <ErrorMessage\n                name=\"taiKhoan\"\n                render={(msg) => <span className=\"text-danger\">{msg}</span>}\n              />\n              <Field name=\"taiKhoan\" type=\"text\" className=\"form-control\" />\n            </div>\n            <div className=\"form-group\">\n              <label>Mật khẩu&nbsp;</label>\n              <ErrorMessage\n                name=\"matKhau\"\n                render={(msg) => <span className=\"text-danger\">{msg}</span>}\n              />\n              <Field name=\"matKhau\" type=\"password\" className=\"form-control\" />\n            </div>\n            <div className=\"form-group\">\n              <label>Họ và tên&nbsp;</label>\n              <ErrorMessage\n                name=\"hoTen\"\n                render={(msg) => <span className=\"text-danger\">{msg}</span>}\n              />\n              <Field name=\"hoTen\" type=\"text\" className=\"form-control\" />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Email&nbsp;</label>\n              <ErrorMessage\n                name=\"email\"\n                render={(msg) => <span className=\"text-danger\">{msg}</span>}\n              />\n              <Field name=\"email\" type=\"email\" className=\"form-control\" />\n            </div>\n            <div className=\"form-group\">\n              <label>Số điện thoại&nbsp;</label>\n              <ErrorMessage\n                name=\"soDt\"\n                render={(msg) => <span className=\"text-danger\">{msg}</span>}\n              />\n              <Field name=\"soDt\" type=\"text\" className=\"form-control\" />\n            </div>\n            {/* <div className=\"form-group\">\n              <label>Loại tài khoản&nbsp;</label>\n              <div>\n                <label>\n                  <Field type=\"radio\" name=\"maLoaiNguoiDung\" value=\"KhachHang\" />\n                  Khách Hàng\n                </label>\n                <label>\n                  <Field type=\"radio\" name=\"maLoaiNguoiDung\" value=\"QuanTri\" />\n                  Quản Trị\n                </label>\n              </div>\n            </div> */}\n            <div className=\"text-center p-2\">\n              <button\n                type=\"submit\"\n                className=\"btn btn-success\"\n                disable={loadingRegister.toString()}\n              >\n                Đăng Ký\n              </button>\n              {/* error from api */}\n              {errorRegister && (\n                <div className=\"alert alert-danger\">\n                  <span>{errorRegister}</span>\n                </div>\n              )}\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </div>\n  );\n}\n"],"sourceRoot":""}