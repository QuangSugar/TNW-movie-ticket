{"version":3,"sources":["pages/Login/index.js"],"names":["useStyles","makeStyles","theme","eye","position","top","right","cursor","color","logoTix","width","marginBottom","display","marginLeft","marginRight","text","textAlign","Login","useSelector","state","authReducer","currentUser","errorLogin","location","useLocation","dispatch","useDispatch","history","useHistory","useState","typePassword","settypePassword","classes","useTheme","isDesktop","useMediaQuery","breakpoints","up","useEffect","type","LOADING_BACKTO_HOME","setTimeout","push","resetErrorLoginRegister","signinUserSchema","yup","shape","taiKhoan","required","matKhau","handleDangKy","handleHold","handleRelease","handleShowPassword","className","style","padding","src","alt","initialValues","validationSchema","onSubmit","user","login","name","render","msg","onMouseDown","onMouseUp","onClick","backgroundColor","borderColor","disable","toString"],"mappings":"qQAcMA,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,IAAK,CACHC,SAAU,WACVC,IAAK,GACLC,MAAO,EACPC,OAAQ,UACRC,MAAO,QAETC,QAAS,CACPC,MAAO,QACPC,aAAc,OACdJ,OAAQ,UACRK,QAAS,QACTC,WAAY,OACZC,YAAa,QAEfC,KAAM,CACJC,UAAW,SACXL,aAAc,YAGH,SAASM,IAAS,IAAD,EACMC,aAAY,SAACC,GAAD,OAAWA,EAAMC,eAAzDC,EADsB,EACtBA,YAAaC,EADS,EACTA,WACjBC,EAAWC,cACTC,EAAWC,cACXC,EAAUC,cAJc,EAKUC,mBAAS,YALnB,mBAKvBC,EALuB,KAKTC,EALS,KAMxBC,EAAUhC,IACVE,EAAQ+B,cACRC,EAAYC,YAAcjC,EAAMkC,YAAYC,GAAG,OAErDC,qBAAU,WAER,GAAIjB,EAAa,CACf,GAAuB,MAAnBE,EAASJ,MAMX,OAJAM,EAAS,CAAEc,KAAMC,WACjBC,YAAW,WACTd,EAAQe,KAAK,OACZ,IAGLf,EAAQe,KAAKnB,EAASJ,UAEvB,CAACE,IACJiB,qBAAU,WACR,OAAO,WACLb,EAASkB,kBAEV,IAEH,IAAMC,EAAmBC,MAAaC,MAAM,CAC1CC,SAAUF,MAAaG,SAAS,wEAChCC,QAASJ,MAAaG,SAAS,2EAM3BE,EAAe,WACnBvB,EAAQe,KAAK,UAAWnB,EAASJ,QAG7BgC,EAAa,WACZjB,GAGLH,EAAgB,SAEZqB,EAAgB,WACflB,GAGLH,EAAgB,aAEZsB,EAAqB,WACrBnB,GAIFH,EADmB,aAAjBD,EACc,OAEA,aAIpB,OACE,sBAAKwB,UAAU,aAAaC,MAAO,CAAEC,QAAS,kBAA9C,UACE,sBAAKF,UAAU,YAAf,UACE,qBAAKG,IAAKhD,IAASiD,IAAI,UAAUJ,UAAWtB,EAAQvB,UACpD,mBAAG6C,UAAWtB,EAAQjB,KAAtB,0JAIF,8BACE,cAAC,IAAD,CACE4C,cAAe,CACbZ,SAAU,GACVE,QAAS,IAEXW,iBAAkBhB,EAClBiB,SA7Ca,SAACC,GACpBrC,EAASsC,YAAMD,KAsCX,SAQG,kBACC,eAAC,IAAD,CAAMR,UAAU,oBAAhB,UACE,sBAAKA,UAAU,+BAAf,UACE,0DACA,cAAC,IAAD,CACEU,KAAK,WACLC,OAAQ,SAACC,GAAD,OAAS,uBAAOZ,UAAU,cAAjB,SAAgCY,OAEnD,cAAC,IAAD,CAAO3B,KAAK,OAAOe,UAAU,eAAeU,KAAK,gBAGnD,sBAAKV,UAAU,+BAAf,UACE,2DACA,cAAC,IAAD,CACEU,KAAK,UACLC,OAAQ,SAACC,GAAD,OAAS,uBAAOZ,UAAU,cAAjB,SAAgCY,OAEnD,cAAC,IAAD,CACE3B,KAAMT,EACNwB,UAAU,eACVU,KAAK,YAEP,qBACEV,UAAWtB,EAAQ7B,IACnBgE,YAAahB,EACbiB,UAAWhB,EACXiB,QAAShB,EAJX,SAMoB,aAAjBvB,EACC,mBACEwB,UAAWpB,EAAY,kBAAoB,cAG7C,mBACEoB,UAAWpB,EAAY,YAAc,yBAK7C,mBACEoB,UAAU,eACVC,MAAO,CAAEhD,OAAQ,WACjB8D,QAASnB,EAHX,oCAOA,wBACEK,MAAO,CACLe,gBAAiB,UACjBC,YAAa,UACbhE,OAAQ,WAEViE,QAAO,OAAElD,QAAF,IAAEA,OAAF,EAAEA,EAAYmD,WACrBlC,KAAK,SACLe,UAAU,iCARZ,sCAaChC,GACC,qBAAKgC,UAAU,qBAAf,SACE,qCAAQhC","file":"static/js/28.63463724.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { makeStyles } from \"@material-ui/core\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport * as yup from \"yup\";\nimport { ErrorMessage, Field, Form, Formik } from \"formik\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport { useTheme } from \"@material-ui/core/styles\";\n\nimport logoTix from \"../Register/logo/logoTix.png\";\nimport { login, resetErrorLoginRegister } from \"../../reducers/actions/Auth\";\nimport { LOADING_BACKTO_HOME } from \"../../reducers/constants/Lazy\";\n\nconst useStyles = makeStyles((theme) => ({\n  eye: {\n    position: \"absolute\",\n    top: 32,\n    right: 9,\n    cursor: \"pointer\",\n    color: \"#000\",\n  },\n  logoTix: {\n    width: \"209px\",\n    marginBottom: \"13px\",\n    cursor: \"pointer\",\n    display: \"block\",\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n  },\n  text: {\n    textAlign: \"center\",\n    marginBottom: \"30px\",\n  },\n}));\nexport default function Login() {\n  const { currentUser, errorLogin } = useSelector((state) => state.authReducer);\n  let location = useLocation();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [typePassword, settypePassword] = useState(\"password\");\n  const classes = useStyles();\n  const theme = useTheme();\n  const isDesktop = useMediaQuery(theme.breakpoints.up(\"md\"));\n\n  useEffect(() => {\n    // đăng nhập thành công thì quay về trang trước đó\n    if (currentUser) {\n      if (location.state === \"/\") {\n        // nếu trang trước đó là \"/\" thì phải hiện loading do trang home mất nhiều thời gian tải\n        dispatch({ type: LOADING_BACKTO_HOME });\n        setTimeout(() => {\n          history.push(\"/\");\n        }, 50);\n        return undefined;\n      }\n      history.push(location.state);\n    }\n  }, [currentUser]);\n  useEffect(() => {\n    return () => {\n      dispatch(resetErrorLoginRegister());\n    };\n  }, []);\n\n  const signinUserSchema = yup.object().shape({\n    taiKhoan: yup.string().required(\"*Tài khoản không được bỏ trống !\"),\n    matKhau: yup.string().required(\"*Mật khẩu không được bỏ trống !\"),\n  });\n\n  const handleSubmit = (user) => {\n    dispatch(login(user));\n  };\n  const handleDangKy = () => {\n    history.push(\"/dangky\", location.state);\n  };\n\n  const handleHold = () => {\n    if (!isDesktop) {\n      return;\n    }\n    settypePassword(\"text\");\n  };\n  const handleRelease = () => {\n    if (!isDesktop) {\n      return;\n    }\n    settypePassword(\"password\");\n  };\n  const handleShowPassword = () => {\n    if (isDesktop) {\n      return;\n    }\n    if (typePassword === \"password\") {\n      settypePassword(\"text\");\n    } else {\n      settypePassword(\"password\");\n    }\n  };\n\n  return (\n    <div className=\"text-light\" style={{ padding: \"60px 32px 30px\" }}>\n      <div className=\"container\">\n        <img src={logoTix} alt=\"logoTix\" className={classes.logoTix} />\n        <p className={classes.text}>\n          Đăng nhập để được nhiều ưu đãi, mua vé và bảo mật thông tin!\n        </p>\n      </div>\n      <div>\n        <Formik\n          initialValues={{\n            taiKhoan: \"\",\n            matKhau: \"\",\n          }}\n          validationSchema={signinUserSchema}\n          onSubmit={handleSubmit}\n        >\n          {() => (\n            <Form className=\"col-sm-10 mx-auto\">\n              <div className=\"form-group position-relative\">\n                <label>Tài khoản&nbsp;</label>\n                <ErrorMessage\n                  name=\"taiKhoan\"\n                  render={(msg) => <small className=\"text-danger\">{msg}</small>}\n                />\n                <Field type=\"text\" className=\"form-control\" name=\"taiKhoan\" />\n              </div>\n\n              <div className=\"form-group position-relative\">\n                <label>Mật khẩu&nbsp;</label>\n                <ErrorMessage\n                  name=\"matKhau\"\n                  render={(msg) => <small className=\"text-danger\">{msg}</small>}\n                />\n                <Field\n                  type={typePassword}\n                  className=\"form-control\"\n                  name=\"matKhau\"\n                />\n                <div\n                  className={classes.eye}\n                  onMouseDown={handleHold}\n                  onMouseUp={handleRelease}\n                  onClick={handleShowPassword}\n                >\n                  {typePassword === \"password\" ? (\n                    <i\n                      className={isDesktop ? \"fa fa-eye-slash\" : \"fa fa-eye\"}\n                    ></i>\n                  ) : (\n                    <i\n                      className={isDesktop ? \"fa fa-eye\" : \"fa fa-eye-slash\"}\n                    ></i>\n                  )}\n                </div>\n              </div>\n              <p\n                className=\"text-success\"\n                style={{ cursor: \"pointer\" }}\n                onClick={handleDangKy}\n              >\n                * Đăng ký\n              </p>\n              <button\n                style={{\n                  backgroundColor: \"#3E63b6\",\n                  borderColor: \"#3E63b6\",\n                  cursor: \"pointer\",\n                }}\n                disable={errorLogin?.toString()}\n                type=\"submit\"\n                className=\"btn btn-success mt-3 container\"\n              >\n                Đăng nhập\n              </button>\n              {/* error from api */}\n              {errorLogin && (\n                <div className=\"alert alert-danger\">\n                  <span> {errorLogin}</span>\n                </div>\n              )}\n            </Form>\n          )}\n        </Formik>\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}